- name: Create RDP User with Secret Password
        run: |
          # We use the secret directly. It is masked in logs automatically by GitHub.
          $password = "${{ secrets.RDP_PASSWORD }}"
          
          # Convert to secure string
          $securePass = ConvertTo-SecureString $password -AsPlainText -Force
          
          # Create the user
          New-LocalUser -Name "RDP" -Password $securePass -AccountNeverExpires
          Add-LocalGroupMember -Group "Administrators" -Member "RDP"
          Add-LocalGroupMember -Group "Remote Desktop Users" -Member "RDP"
          
          if (-not (Get-LocalUser -Name "RDP")) {
              Write-Error "User creation failed"
              exit 1
          }
          
          # Verification (without printing the actual password)
          Write-Host "User 'RDP' created successfully with your custom secret."
